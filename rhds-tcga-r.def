Bootstrap: docker
From: rocker/r-ver:4.5.2

%files
    install.r

%post    
    # install curl 
    apt-get update && \
    apt-get install -y libcurl4-openssl-dev curl

    # install quarto
    QUARTO_VERSION=1.6.42
    QUARTO_URL=https://github.com/quarto-dev/quarto-cli/releases/download/v${QUARTO_VERSION}/quarto-${QUARTO_VERSION}-linux-amd64.deb
    curl -o quarto-linux-amd64.deb -L ${QUARTO_URL} && \
        DEBIAN_FRONTEND=noninteractive apt-get install -f -y ./quarto-linux-amd64.deb && \
        rm quarto-linux-amd64.deb

    # install R packages
    Rscript install.r

%environment
    export LC_ALL=C

%runscript
    echo "Arguments received: $*"
    exec "$@"
    
%help
    Runs R scripts in the rhds-tcga analysis.

